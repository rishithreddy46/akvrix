{% extends 'store/base.html' %}
{% load static %}
{% block title %}Order #{{ order.order_number }} — AKVRIX{% endblock %}
{% block nav_class %}scrolled{% endblock %}
{% block content %}
<div class="page-header"><div class="container">
<div class="breadcrumb"><a href="{% url 'home' %}">Home</a> / <a href="{% url 'my_orders' %}">My Orders</a> / <span>#{{ order.order_number }}</span></div>
</div></div>
<section class="section"><div class="container">
<div style="display:grid;grid-template-columns:1fr 360px;gap:2rem;max-width:1000px">
<div>
<!-- Tracking Progress -->
<div style="background:var(--bg-card);border-radius:var(--radius-lg);padding:2rem;margin-bottom:1.5rem;border:1px solid var(--border)">
<h3 style="font-size:1rem;text-transform:uppercase;letter-spacing:.08em;margin-bottom:1.5rem;color:var(--text)">Order Tracking</h3>
<div style="display:flex;align-items:flex-start;position:relative">
{% for step in tracking_steps %}
<div style="flex:1;text-align:center;position:relative;z-index:1">
<div style="width:40px;height:40px;border-radius:50%;margin:0 auto .5rem;display:flex;align-items:center;justify-content:center;font-size:1rem;
{% if step.completed %}background:var(--gradient);color:#fff{% else %}background:var(--bg-alt);color:var(--text-muted);border:2px solid var(--border){% endif %}">
<i class="{{ step.icon }}"></i></div>
<p style="font-size:.7rem;font-weight:{% if step.active %}700{% else %}500{% endif %};color:{% if step.completed %}var(--text){% else %}var(--text-muted){% endif %}">{{ step.label }}</p>
</div>
{% if not forloop.last %}
<div style="position:absolute;top:20px;left:calc({{ forloop.counter0 }} * (100% / {{ tracking_steps|length }}) + 50% / {{ tracking_steps|length }} + 20px);width:calc(100% / {{ tracking_steps|length }} - 40px);height:3px;
{% if step.completed and not step.active %}background:var(--gradient){% else %}background:var(--border){% endif %};z-index:0"></div>
{% endif %}
{% endfor %}
</div>
{% if order.tracking_number %}
<div style="margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border)">
<p style="font-size:.82rem;color:var(--text-secondary)">Tracking Number: <strong style="color:var(--text)">{{ order.tracking_number }}</strong></p>
{% if order.carrier %}<p style="font-size:.82rem;color:var(--text-secondary)">Carrier: <strong style="color:var(--text)">{{ order.carrier }}</strong></p>{% endif %}
{% if order.estimated_delivery %}<p style="font-size:.82rem;color:var(--text-secondary)">Estimated Delivery: <strong style="color:var(--text)">{{ order.estimated_delivery|date:"M d, Y" }}</strong></p>{% endif %}
</div>
{% endif %}
</div>
<!-- Order Items -->
<div style="background:var(--bg-card);border-radius:var(--radius-lg);padding:1.5rem;border:1px solid var(--border)">
<h3 style="font-size:1rem;text-transform:uppercase;letter-spacing:.08em;margin-bottom:1rem;color:var(--text)">Items Ordered</h3>
{% for item in items %}
<div style="display:flex;gap:1rem;padding:1rem 0;{% if not forloop.last %}border-bottom:1px solid var(--border){% endif %}">
{% if item.product %}<img src="{{ item.product.image }}" style="width:60px;height:75px;object-fit:cover;border-radius:8px" alt="">{% endif %}
<div style="flex:1">
<h4 style="font-size:.9rem;color:var(--text)">{{ item.product_name }}</h4>
<p style="font-size:.78rem;color:var(--text-secondary)">Size: {{ item.size }} · Qty: {{ item.quantity }}</p>
<p style="font-size:.9rem;font-weight:700;color:var(--text);margin-top:.25rem">₹{{ item.price }}</p>
</div>
</div>
{% endfor %}
</div>
</div>
<!-- Sidebar -->
<div>
<div style="background:var(--bg-card);border-radius:var(--radius-lg);padding:1.5rem;margin-bottom:1rem;border:1px solid var(--border)">
<h3 style="font-size:.85rem;text-transform:uppercase;letter-spacing:.08em;margin-bottom:1rem;color:var(--text-secondary)">Order Summary</h3>
<div style="display:flex;justify-content:space-between;font-size:.85rem;margin-bottom:.4rem;color:var(--text-secondary)"><span>Subtotal</span><span style="color:var(--text)">₹{{ order.subtotal }}</span></div>
<div style="display:flex;justify-content:space-between;font-size:.85rem;margin-bottom:.4rem;color:var(--text-secondary)"><span>Shipping</span><span style="color:var(--text)">₹{{ order.shipping }}</span></div>
<div style="display:flex;justify-content:space-between;font-size:1.1rem;font-weight:700;margin-top:.75rem;padding-top:.75rem;border-top:1px solid var(--border);color:var(--text)"><span>Total</span><span>₹{{ order.total }}</span></div>
</div>
<div style="background:var(--bg-card);border-radius:var(--radius-lg);padding:1.5rem;margin-bottom:1rem;border:1px solid var(--border)">
<h3 style="font-size:.85rem;text-transform:uppercase;letter-spacing:.08em;margin-bottom:1rem;color:var(--text-secondary)">Shipping Address</h3>
<p style="font-size:.85rem;color:var(--text);line-height:1.6">{{ order.first_name }} {{ order.last_name }}<br>{{ order.address }}<br>{{ order.city }}, {{ order.state }} {{ order.zip_code }}<br>{{ order.country }}</p>
<p style="font-size:.82rem;color:var(--text-secondary);margin-top:.5rem">{{ order.phone }}</p>
</div>
<div style="background:var(--bg-card);border-radius:var(--radius-lg);padding:1.5rem;border:1px solid var(--border)">
<h3 style="font-size:.85rem;text-transform:uppercase;letter-spacing:.08em;margin-bottom:.5rem;color:var(--text-secondary)">Payment</h3>
<p style="font-size:.85rem;color:var(--text);text-transform:capitalize">{{ order.payment_method }}</p>
</div>
</div>
</div>
</div></section>
{% endblock %}